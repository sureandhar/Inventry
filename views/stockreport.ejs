<!DOCTYPE html>
<html>
    <head>
        <style>
        table {
            border-collapse: collapse;
            border-spacing: 0px;
            width: 100%;
        }
        
        .main h3{
            text-align: center;
        }

        table td{
            text-align: center;
        }
        table, th, td {
            border: 1px solid black;
            
        }
        .table td, .table th{
            padding: .75em;
            vertical-align: top;
            text-align: center;
            border-top: 1px solid var(--border-btn);
        }
        .print {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }
        .time{
            display: flex;
            flex-direction: row;
            justify-content: left;
        }

        
        </style>
    </head>
    <body>
        
        <div class="main">           
                <h3>Product Stock Details</h3>
                <% let date = new Date();
                function formatAMPM(date) {
                    var hours = date.getHours();
                    var minutes = date.getMinutes();
                    var ampm = hours >= 12 ? 'PM' : 'AM';
                    hours = hours % 12;
                    hours = hours ? hours : 12; // the hour '0' should be '12'
                    minutes = minutes < 10 ? '0'+minutes : minutes;
                    var strTime = hours + ':' + minutes + ' ' + ampm;
                    return strTime;
                  }     

                    let today = new Date().toLocaleDateString()%>
                    <h3>Available Stock on <%= today %> </h3>

                <div class="print">
                <div id="pageFooter" class="time" ><p> Print Date: <%= today %> <b><%= formatAMPM(new Date) %></b></p>
                </div></div>
                    <table class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th>#</th>
                                <th>id</th>
                                <th>Productname</th>
                                <th>Avail stock</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <!-- report table -->

                            

<% 
function quantity(id){
    var qt1=0;
    var qt2=0;
    for(var j=0;j < user.length;j++){
        
        if(id == user[j].productid){
            qt1+=user[j].quantity;
        }
    }
    for(var k=0;k < sale.length;k++){
        
        if(id == sale[k].productid){
            qt2+=sale[k].quantity;
        }
    }

    return qt1-qt2;
}
for(var i=0;i < users.length;i++){ 
    
    %>

    
    <tr>
        <td><%= i+1 %></td>
        <td><%= users[i].productid %></td>
        <td><%= users[i].productname %></td>
        <td><%= quantity(users[i].productid ) %></td>
    </tr>

<% } %>
                            <!-- /report table -->

                        </tbody>
                    </table>
                    
        </div>
    </body>
</html>